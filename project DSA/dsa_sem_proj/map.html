
    <!DOCTYPE html>
    <html>
    <head>
        <meta charset="utf-8" />
        <title>NUST Intelligent Navigation</title>
        <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
        <script src="https://unpkg.com/maplibre-gl@4.7.1/dist/maplibre-gl.js"></script>
        <link href="https://unpkg.com/maplibre-gl@4.7.1/dist/maplibre-gl.css" rel="stylesheet" />
        <style>
            body { margin: 0; padding: 0; }
            #map { position: absolute; top: 0; bottom: 0; width: 100%; }
            .legend {
                background-color: #fff;
                border-radius: 3px;
                bottom: 30px;
                box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
                font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;
                padding: 10px;
                position: absolute;
                right: 10px;
                z-index: 1;
            }
        </style>
    </head>
    <body>
        <div id="map"></div>
        <div class="legend">
            <h4>Route Analytics</h4>
            <div><span style="background-color: #3b82f6; width: 10px; height: 10px; display: inline-block;"></span> Calculated Path</div>
            <div><span style="background-color: #ef4444; width: 10px; height: 10px; display: inline-block;"></span> POIs</div>
        </div>
        <script>
            const map = new maplibregl.Map({
                container: 'map',
                style: 'https://tiles.openfreemap.org/styles/liberty', 
                center: [72.9803568, 33.6460558],
                zoom: 14
            });

            map.on('load', () => {
                
                // LAYER 1: The Path
                map.addSource('route', {
                    'type': 'geojson',
                    'data': {
                        'type': 'Feature',
                        'properties': {},
                        'geometry': {
                            'type': 'LineString',
                            'coordinates': [[72.9803568, 33.6460558], [72.9805488, 33.6461336], [72.9805488, 33.6461336], [72.9819967, 33.6461041], [72.9819967, 33.6461041], [72.9826545, 33.6460024], [72.9826545, 33.6460024], [72.9851646, 33.6456134], [72.9851646, 33.6456134], [72.9852677, 33.6455981], [72.9852677, 33.6455981], [72.9857658, 33.6457758], [72.9857658, 33.6457758], [72.9863675, 33.6464003], [72.9863675, 33.6464003], [72.9875436, 33.6470269], [72.9875436, 33.6470269], [72.9880133, 33.6471605], [72.9880133, 33.6471605], [72.9890142, 33.6473034], [72.9890142, 33.6473034], [72.9900057, 33.6472298], [72.9900057, 33.6472298], [72.9900497, 33.647223], [72.9900497, 33.647223], [72.990141, 33.6472028], [72.990141, 33.6472028], [72.9902616, 33.6471688], [72.9902616, 33.6471688], [72.9912193, 33.6468848], [72.9912193, 33.6468848], [72.9929389, 33.645866], [72.9929389, 33.645866], [72.9929774, 33.6458404], [72.9929774, 33.6458404], [72.993042, 33.6458017], [72.993042, 33.6458017], [72.9931054, 33.6457448], [72.9931054, 33.6457448], [72.9931506, 33.6456944], [72.9931506, 33.6456944], [72.9936074, 33.6451401], [72.9936074, 33.6451401], [72.9938276, 33.6448095], [72.9938276, 33.6448095], [72.9938872, 33.6447025], [72.9938872, 33.6447025], [72.9940853, 33.6442476], [72.9940853, 33.6442476], [72.9942061, 33.6436456], [72.9942061, 33.6436456], [72.9942073, 33.6435866], [72.9942073, 33.6435866], [72.994208, 33.6434101], [72.994208, 33.6434101], [72.9942011, 33.6433216], [72.9942011, 33.6433216], [72.9941881, 33.6432037], [72.9941881, 33.6432037], [72.9941751, 33.6430864], [72.9941751, 33.6430864], [72.9941577, 33.6429458], [72.9941577, 33.6429458], [72.9940211, 33.6424733], [72.9940211, 33.6424733], [72.9938968, 33.6422097], [72.9938968, 33.6422097], [72.9938706, 33.6421675], [72.9938706, 33.6421675], [72.9938136, 33.6420822], [72.9938136, 33.6420822], [72.9936892, 33.6419361]]
                        }
                    }
                });
                
                map.addLayer({
                    'id': 'route',
                    'type': 'line',
                    'source': 'route',
                    'layout': {
                        'line-join': 'round',
                        'line-cap': 'round'
                    },
                    'paint': {
                        'line-color': '#3b82f6',
                        'line-width': 6,
                        'line-opacity': 0.8
                    }
                });

                // LAYER 2: POIs
                map.addSource('pois', {
                    'type': 'geojson',
                    'data': {
                        'type': 'FeatureCollection',
                        'features': [{"type": "Feature", "geometry": {"type": "Point", "coordinates": [72.9770427, 33.6433946]}, "properties": {"name": "ghulam hussain flat", "type": "Location"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [72.9771791, 33.6434672]}, "properties": {"name": "Dreamland Hostel", "type": "Location"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [72.983723, 33.6420775]}, "properties": {"name": "Exam center", "type": "Location"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [72.980579, 33.6409644]}, "properties": {"name": "Rayyan boys hostel", "type": "Location"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [72.9804454, 33.6410383]}, "properties": {"name": "Hostel", "type": "Location"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [72.9836721, 33.6410653]}, "properties": {"name": "NUST Gate 4", "type": "university"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [72.9825669, 33.6425471]}, "properties": {"name": "NUST Gate", "type": "university"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [72.9884271, 33.6430046]}, "properties": {"name": "C2 ROAD", "type": "Location"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [72.9882696, 33.6430227]}, "properties": {"name": "Concordia 2 Cafe", "type": "cafe"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [72.9888616, 33.6429645]}, "properties": {"name": "Gate 16 NUST", "type": "university"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [72.9857111, 33.6420923]}, "properties": {"name": "NUST Gate 15", "type": "university"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [72.9756494, 33.645393]}, "properties": {"name": "Allied Bank Ltd - ATM Only", "type": "bank"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [72.9784558, 33.645394]}, "properties": {"name": "Epic Fish and Shinwari", "type": "restaurant"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [72.9757636, 33.6452977]}, "properties": {"name": "\u0645\u06a9\u0688\u0648\u0646\u0644\u0688\u0632", "type": "fast_food"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [72.976354, 33.6499191]}, "properties": {"name": "Shandoor Boys Hostel", "type": "Location"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [72.9768154, 33.6495898]}, "properties": {"name": "Noor Lodge", "type": "Location"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [72.9805717, 33.6461417]}, "properties": {"name": "Gate (2200269370)", "type": "Entrance"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [72.9806408, 33.6460555]}, "properties": {"name": "Gate (7913313555)", "type": "Entrance"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [72.9801256, 33.6459687]}, "properties": {"name": "NUST Security CheckPost", "type": "Location"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [72.9825827, 33.6499073]}, "properties": {"name": "G-12 West nust station", "type": "Location"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [72.9885006, 33.6453958]}, "properties": {"name": "Faculty Lounge", "type": "cafe"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [72.9859098, 33.645893]}, "properties": {"name": "CIPS construction", "type": "Location"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [72.9855624, 33.6454544]}, "properties": {"name": "Iqbal Square", "type": "Location"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [72.9824858, 33.6500223]}, "properties": {"name": "G-12 west nust station", "type": "Location"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [72.9919262, 33.642972]}, "properties": {"name": "daulat bank", "type": "bank"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [72.991979, 33.643728]}, "properties": {"name": "\u0627\u06cc\u0686-12", "type": "Location"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [72.990209, 33.6428642]}, "properties": {"name": "SECCS", "type": "school"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [72.9920086, 33.6455849]}, "properties": {"name": "Rumi Hostel", "type": "Location"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [72.9905562, 33.6476704]}, "properties": {"name": "The Wall Cafe", "type": "Location"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [72.9948565, 33.6485836]}, "properties": {"name": "Medical School", "type": "Location"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [72.9908389, 33.6475751]}, "properties": {"name": "C1 Coffee Lounge(minor)", "type": "cafe"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [72.9976632, 33.6416682]}, "properties": {"name": "NUST VILLAS", "type": "Location"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [72.9952173, 33.6440018]}, "properties": {"name": "Amna Hostel", "type": "Location"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [72.9995939, 33.6487138]}, "properties": {"name": "Entrance Cafe", "type": "cafe"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [72.9880189, 33.6393961]}, "properties": {"name": "Jango", "type": "cafe"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [72.9894125, 33.6363223]}, "properties": {"name": "SMME", "type": "Location"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [72.9924923, 33.6373732]}, "properties": {"name": "NUST Saddle Club", "type": "Location"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [72.9926537, 33.639997]}, "properties": {"name": "nust gogay chany", "type": "Location"}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [72.9902164, 33.6368447]}, "properties": {"name": "SNS Old Building", "type": "school"}}]
                    }
                });

                map.addLayer({
                    'id': 'pois',
                    'type': 'circle',
                    'source': 'pois',
                    'paint': {
                        'circle-radius': 8,
                        'circle-color': '#ef4444',
                        'circle-stroke-width': 2,
                        'circle-stroke-color': '#ffffff'
                    }
                });

                // Add popups on click for POIs
                map.on('click', 'pois', (e) => {
                    const coordinates = e.features[0].geometry.coordinates.slice();
                    const name = e.features[0].properties.name;
                    new maplibregl.Popup()
                        .setLngLat(coordinates)
                        .setHTML('<strong>' + name + '</strong>')
                        .addTo(map);
                });

                // Change cursor on hover
                map.on('mouseenter', 'pois', () => {
                    map.getCanvas().style.cursor = 'pointer';
                });
                map.on('mouseleave', 'pois', () => {
                    map.getCanvas().style.cursor = '';
                });
                
                // Fit bounds to route
                const coords = [[72.9803568, 33.6460558], [72.9805488, 33.6461336], [72.9805488, 33.6461336], [72.9819967, 33.6461041], [72.9819967, 33.6461041], [72.9826545, 33.6460024], [72.9826545, 33.6460024], [72.9851646, 33.6456134], [72.9851646, 33.6456134], [72.9852677, 33.6455981], [72.9852677, 33.6455981], [72.9857658, 33.6457758], [72.9857658, 33.6457758], [72.9863675, 33.6464003], [72.9863675, 33.6464003], [72.9875436, 33.6470269], [72.9875436, 33.6470269], [72.9880133, 33.6471605], [72.9880133, 33.6471605], [72.9890142, 33.6473034], [72.9890142, 33.6473034], [72.9900057, 33.6472298], [72.9900057, 33.6472298], [72.9900497, 33.647223], [72.9900497, 33.647223], [72.990141, 33.6472028], [72.990141, 33.6472028], [72.9902616, 33.6471688], [72.9902616, 33.6471688], [72.9912193, 33.6468848], [72.9912193, 33.6468848], [72.9929389, 33.645866], [72.9929389, 33.645866], [72.9929774, 33.6458404], [72.9929774, 33.6458404], [72.993042, 33.6458017], [72.993042, 33.6458017], [72.9931054, 33.6457448], [72.9931054, 33.6457448], [72.9931506, 33.6456944], [72.9931506, 33.6456944], [72.9936074, 33.6451401], [72.9936074, 33.6451401], [72.9938276, 33.6448095], [72.9938276, 33.6448095], [72.9938872, 33.6447025], [72.9938872, 33.6447025], [72.9940853, 33.6442476], [72.9940853, 33.6442476], [72.9942061, 33.6436456], [72.9942061, 33.6436456], [72.9942073, 33.6435866], [72.9942073, 33.6435866], [72.994208, 33.6434101], [72.994208, 33.6434101], [72.9942011, 33.6433216], [72.9942011, 33.6433216], [72.9941881, 33.6432037], [72.9941881, 33.6432037], [72.9941751, 33.6430864], [72.9941751, 33.6430864], [72.9941577, 33.6429458], [72.9941577, 33.6429458], [72.9940211, 33.6424733], [72.9940211, 33.6424733], [72.9938968, 33.6422097], [72.9938968, 33.6422097], [72.9938706, 33.6421675], [72.9938706, 33.6421675], [72.9938136, 33.6420822], [72.9938136, 33.6420822], [72.9936892, 33.6419361]];
                if (coords.length > 0) {
                    const bounds = coords.reduce((bounds, coord) => {
                        return bounds.extend(coord);
                    }, new maplibregl.LngLatBounds(coords[0], coords[0]));
                    map.fitBounds(bounds, { padding: 50 });
                }
            });
        </script>
    </body>
    </html>
    